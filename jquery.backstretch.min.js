/*
 * jQuery Backstretch
 * Version 1.2.7
 * http://srobbin.com/jquery-plugins/jquery-backstretch/
 *
 * Add a dynamically-resized background image to the page
 *
 * Copyright (c) 2012 Scott Robbin (srobbin.com)
 * Licensed under the MIT license
 * https://raw.github.com/srobbin/jquery-backstretch/master/LICENSE.txt
 * 
*/
;(function(a){a.backstretch=function(j,f,i){var b={centeredX:true,centeredY:true,speed:0,minWidth:0},p=a("#backstretch"),r=p.data("settings")||b,n=p.data("settings"),h,s,m,d,e,g,q,o,k;if(f&&typeof f=="object"){a.extend(r,f)}if(f&&typeof f=="function"){i=f}a(document).ready(function(){var E=window,u=navigator.userAgent,x=navigator.platform,D=u.match(/AppleWebKit\/([0-9]+)/),B=!!D&&D[1],v=u.match(/Fennec\/([0-9]+)/),z=!!v&&v[1],A=u.match(/Opera Mobi\/([0-9]+)/),t=!!A&&A[1],y=u.match(/MSIE ([0-9]+)/),C=!!y&&y[1];s=!(((x.indexOf("iPhone")>-1||x.indexOf("iPad")>-1||x.indexOf("iPod")>-1)&&B&&B<534)||(E.operamini&&({}).toString.call(E.operamini)==="[object OperaMini]")||(A&&t<7458)||(u.indexOf("Android")>-1&&B&&B<533)||(z&&z<6)||("palmGetResource" in window&&B&&B<534)||(u.indexOf("MeeGo")>-1&&u.indexOf("NokiaBrowser/8.5.0")>-1)||(C&&C<=6));h=s?a(window):a(document);m=s&&window.innerHeight;l()});return this;function l(){if(j){var t;if(p.length==0){p=a("<div />").attr("id","backstretch").css({left:0,top:0,position:s?"fixed":"absolute",overflow:"hidden",zIndex:-999999,margin:0,padding:0,height:"100%",width:"100%"})}else{p.find("img").addClass("deleteable")}t=a("<img />").css({position:"absolute",display:"none",margin:0,padding:0,border:"none",zIndex:-999999}).bind("load",function(w){var x=a(this),v,u;x.css({width:"auto",height:"auto"});v=this.width||a(w.target).width();u=this.height||a(w.target).height();d=v/u;c();x.fadeIn(r.speed,function(){p.find(".deleteable").remove();if(typeof i=="function"){i()}})}).appendTo(p);if(a("body #backstretch").length==0){if(a(window).scrollTop()===0){window.scrollTo(0,0)}a("body").append(p)}p.data("settings",r);t.attr("src",j);a(window).unbind("resize.backstretch").bind("resize.backstretch",function(){if("onorientationchange" in window){if(window.pageYOffset===0){window.scrollTo(0,1)}}c()})}}function c(){try{k={left:0,top:0},rootWidth=g=h.width(),rootHeight=m?window.innerHeight:h.height(),q=g/d;var u=q<rootHeight;if((rootWidth>0&&rootWidth>=r.minWidth)||u){if(q>=rootHeight){o=(q-rootHeight)/2;if(r.centeredY){k.top="-"+o+"px"}}else{q=rootHeight;g=q*d;o=(g-rootWidth)/2;if(r.centeredX){k.left="-"+o+"px"}}p.css({width:rootWidth,height:rootHeight}).find("img:not(.deleteable)").css({width:g,height:q}).css(k)}}catch(t){}}}})(jQuery);